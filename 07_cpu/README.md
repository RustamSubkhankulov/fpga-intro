### Модель процессора архитектуры RISC-V c поддержкой арифметических инструкций.

Поддерживаются инструкции: R-типа (add, sub, xor, or, and, sll, srl, sra, slt, sltu), I-типа (addi, subi, xori, ori, andi, slli, srli, srai, slti, sltui) и S-типа (sb, sh, sw)

## Модули на языке Verilog: 
- **alu.v** - ALU-юнит, выполняющий арифметические и логические операции
- **control.v** - control-юнит, выполняющий декодирование инструкции и вычисляющий как результат некоторое количество control-сигналов для других модулей CPU 
- **regf.v** - регистровый файл, содержащий 32 32-х битных регистра x0-x31
- **rom.v** - ROM-память, инициализирующася из файла **misc/rom_contents.txt**
- **sign_ext.v** - модуль знакового расширения константы
- **core.v** - ядро процессора, связывающее логику предыдущих модулей
- **cpu.v** - модуль, являющийся объединением ядра и ПЗУ
- **mem_ctl.v** - контроллер памяти для MMIO
- **testbench.v** - тестовый модуль, запускающий симуляцию 

В процессе работы по каждому сигналу тактирования процессор (cpu.v) получается из ROM (rom.v) 32-битное значение - текущую инструкцию. При помощи control-юнита (control.v, core.v) определяются значения контролирующих сигналов для других модулей. На основании кодировки инструкции определяется операция и операнды, передаваемые на ALU - arithmetic logic unit (alu.v). Аргументы могут быть значениями из регистрового файла (regf.v) или константными значениями, закодированными прямо в инструкции. Результат работы ALU записывается обратно в регистровый файл, либо записывается в память (mem_ctl.v). При записи по определенным адресам в памяти, записываемое значение может как быть сохранено в памяти, там и записано в порт (MMIO). 

## Сборка

Перед сборкой необходимо установить toolchain для RISC-V. На Ubuntu Linux это можно сделать следующими командами: 
```
sudo apt install binutils-riscv64-linux-gnu
sudo apt install gcc-riscv64-linux-gnu
```
- Данные утилиты используются при сборке проекта для получения текстового файла с 16-ричным представлением кодов инструкций, который применяется для инициализации памяти инструкций. 
Для этого перейдите в директорию **asm/**, и и там исполните следующую команду <code>DEST='../misc/rom_contents.txt make rom</code>. Исходные команды для создания файла ROM находятся в *asm/src/prog.S*. 

- Для компиляции *iverilog*, запуска симуляции и просмотра дампа переменных при помощи *gtkwave*, используйте команду <code>make test</code>
